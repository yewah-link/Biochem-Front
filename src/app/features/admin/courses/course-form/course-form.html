<div class="max-w-4xl mx-auto p-6 bg-white rounded-lg shadow">
  <h1 class="text-3xl font-bold text-gray-900 mb-6">Create New Course</h1>

  <form [formGroup]="courseForm" (ngSubmit)="saveCourse()" class="space-y-6">
    <div>
      <label class="block text-sm font-semibold text-gray-700 mb-2">Title</label>
      <input
        formControlName="title"
        placeholder="Course Title"
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-amber-600 focus:border-amber-600">
      @if (courseForm.get('title')?.invalid && courseForm.get('title')?.touched) {
        <span class="text-xs text-red-600 mt-1 block">Title is required</span>
      }
    </div>

    <div>
      <label class="block text-sm font-semibold text-gray-700 mb-2">Description</label>
      <textarea
        formControlName="description"
        placeholder="Course Description"
        rows="5"
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-amber-600 focus:border-amber-600 resize-y"></textarea>
    </div>

    <div>
      <label class="block text-sm font-semibold text-gray-700 mb-2">Category</label>
      <select
        formControlName="categoryId"
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-amber-600 focus:border-amber-600">
        <option [value]="null" disabled>Select a category</option>
        @for (cat of categories; track cat.id) {
          <option [value]="cat.id">{{ cat.name }}</option>
        }
      </select>
      @if (courseForm.get('categoryId')?.invalid && courseForm.get('categoryId')?.touched) {
        <span class="text-xs text-red-600 mt-1 block">Category is required</span>
      }
    </div>

    <div>
      <label class="block text-sm font-semibold text-gray-700 mb-2">Thumbnail URL</label>
      <input
        formControlName="thumbnailUrl"
        placeholder="https://example.com/image.jpg"
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-amber-600 focus:border-amber-600">
    </div>

    <div>
      <label class="block text-sm font-semibold text-gray-700 mb-2">Estimated Hours</label>
      <input
        type="number"
        formControlName="estimatedHours"
        min="0"
        step="0.5"
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-amber-600 focus:border-amber-600">
    </div>

    <div class="flex gap-3">
      <button
        type="submit"
        [disabled]="!courseForm.valid || isLoading"
        class="px-6 py-2 bg-amber-700 text-white rounded-md font-medium hover:bg-amber-800 disabled:opacity-50 disabled:cursor-not-allowed transition">
        {{ isLoading ? 'Creating...' : 'Create Course' }}
      </button>
      <button
        type="button"
        (click)="cancel()"
        [disabled]="isLoading"
        class="px-6 py-2 bg-gray-600 text-white rounded-md font-medium hover:bg-gray-700 disabled:opacity-50 transition">
        Cancel
      </button>
    </div>
  </form>
</div>

@if (isLoading) {
  <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white p-6 rounded-lg shadow-lg">
      <p class="text-gray-700">Creating course...</p>
    </div>
  </div>
}
